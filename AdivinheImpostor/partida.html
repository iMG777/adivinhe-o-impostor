<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivinhe O Impostor</title>
    <link rel="stylesheet" href="partida.css">
</head>
<body>

    <div class="principal">
        <h1>HORA DO SORTEIO</h1>
    </div>

    <button id="btnEmbaralhar">üîÅ</button>
    
    <div class="container" id="containerCartas"></div>

    <!-- LISTAS DE TEMAS -->
    <script>
        const temas = {
            SUPER_HEROIS: [
                ['Superman', 'Batman'],
                ['Flash', 'Kid Flash', 'Merc√∫rio'],
                ['Homem-Aranha', 'Homem de Ferro'],
                ['Thor', 'Loki'],
                ['Mulher-Maravilha', 'Mulher-Gato']
            ],
            ANIMES: [
                ['Naruto', 'Sasuke'],
                ['Goku', 'Vegeta'],
                ['Luffy', 'Zoro'],
                ['Ichigo', 'Rukia'],
                ['Eren', 'Levi']
            ],
            JOGOS: [
                ['Mario', 'Luigi'],
                ['Kratos', 'Atreus'],
                ['Link', 'Zelda'],
                ['Sonic', 'Shadow'],
                ['Master Chief', 'Cortana']
            ]
        };

    </script>

    <!-- SCRIPT PRINCIPAL -->
    <script>
        const container = document.getElementById('containerCartas');
        const btn = document.getElementById('btnEmbaralhar');
        const TEMPO_VISUALIZACAO = 700;

        const qtdJogadores = Number(localStorage.getItem('qtdJogadores'));
        const temaSelecionado = localStorage.getItem('tema');

        if (!qtdJogadores || !temas[temaSelecionado]) {
            alert('Configura√ß√£o inv√°lida. Volte para o lobby.');
        }

        function gerarCartas() {
            container.innerHTML = '';

            const grupos = temas[temaSelecionado];
            const grupo = grupos[Math.floor(Math.random() * grupos.length)];

            const nomes = [...grupo].sort(() => Math.random() - 0.5);
            const nomeBase = nomes[0];
            const nomeImpostor = nomes[1];

            const indiceImpostor = Math.floor(Math.random() * qtdJogadores);

            for (let i = 0; i < qtdJogadores; i++) {

                const carta = document.createElement('div');
                carta.classList.add('carta');

                const textoCarta = (i === indiceImpostor)
                    ? nomeImpostor
                    : nomeBase;

                carta.innerHTML = `
                    <div class="frente"><h1>?</h1></div>
                    <div class="tras">${textoCarta}</div>
                `;

                carta.addEventListener('click', () => {
                    if (carta.classList.contains('bloqueada')) return;

                    carta.classList.add('virada');

                    setTimeout(() => {
                        carta.classList.remove('virada');
                        carta.classList.add('bloqueada');
                    }, TEMPO_VISUALIZACAO);
                });

                container.appendChild(carta);
            }
        }

        btn.addEventListener('click', gerarCartas);

        // PRIMEIRA RODADA
        gerarCartas();

    </script>

</body>
</html>
